<!DOCTYPE html>
<html>
  <head>
  <title>
      
          Learning Git - Bin Zhang
      
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Bin Zhang" />
  <link rel="shortcut icon" type="image/x-icon" href="https://binzhang-u5f6c.github.io/img/favicon.png">

  
  
  
  
  
  <link rel="stylesheet" href="https://binzhang-u5f6c.github.io/style.min.39acacc5d2051426f655a6b7fbf4786fbd0fd8fffd09322c9b497ef0f7439b3f.css" integrity="sha256-OaysxdIFFCb2Vaa3&#43;/R4b70P2P/9CTIsm0l&#43;8PdDmz8=">
  
  
  
  <link rel="stylesheet" href="https://binzhang-u5f6c.github.io/style-dark.min.0a647fb6c07e04b77b54fa0515d0a683d39ecdb251dba960fe1f966f7ff36fc2.css" media="(prefers-color-scheme: dark)" integrity="sha256-CmR/tsB&#43;BLd7VPoFFdCmg9OezbJR26lg/h&#43;Wb3/zb8I=">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

  
  
  <link rel="stylesheet" href="https://binzhang-u5f6c.github.io/css/custom.css">
  

  <meta property="og:title" content="Learning Git" />
<meta property="og:description" content="1. Git Basics Initializing a repository.
git init Clone a repository.
git clone &lt;url&gt; &lt;path&gt; Track new files or stage modified file.
git add &lt;file&gt; Remove and move files.
git rm &lt;file&gt; git mv &lt;file&gt; Commit all staged files.
git commit git commit --amend # commit to your last commit Check the status.
git status Show commit history.
git log git log --patch # show the difference Work with remotes." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://binzhang-u5f6c.github.io/posts/learning-git/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-16T20:34:15+08:00" />
<meta property="article:modified_time" content="2020-04-16T20:34:15+08:00" />

<meta itemprop="name" content="Learning Git">
<meta itemprop="description" content="1. Git Basics Initializing a repository.
git init Clone a repository.
git clone &lt;url&gt; &lt;path&gt; Track new files or stage modified file.
git add &lt;file&gt; Remove and move files.
git rm &lt;file&gt; git mv &lt;file&gt; Commit all staged files.
git commit git commit --amend # commit to your last commit Check the status.
git status Show commit history.
git log git log --patch # show the difference Work with remotes."><meta itemprop="datePublished" content="2020-04-16T20:34:15+08:00" />
<meta itemprop="dateModified" content="2020-04-16T20:34:15+08:00" />
<meta itemprop="wordCount" content="807">
<meta itemprop="keywords" content="others," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="https://binzhang-u5f6c.github.io/img/avatar.jpg"/>
<meta name="twitter:title" content="Learning Git"/>
<meta name="twitter:description" content="1. Git Basics Initializing a repository.
git init Clone a repository.
git clone &lt;url&gt; &lt;path&gt; Track new files or stage modified file.
git add &lt;file&gt; Remove and move files.
git rm &lt;file&gt; git mv &lt;file&gt; Commit all staged files.
git commit git commit --amend # commit to your last commit Check the status.
git status Show commit history.
git log git log --patch # show the difference Work with remotes."/>

  <!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->

  <!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->

  
  
</head>

  <body>
    
  <h1>Learning Git</h1>
  <header>
  
  <div class="avatar">
    <img class="avatarMask" src="https://binzhang-u5f6c.github.io/img/avatar.jpg" alt="">
    <a href="https://binzhang-u5f6c.github.io"><img class="avatar-border" src="https://binzhang-u5f6c.github.io/img/avatar-border.svg" alt=""></a>
  </div>
  
  <h2><a class="author" href="https://binzhang-u5f6c.github.io">Bin Zhang</a></h2>
</header>

  
  
  
  <p class="date">April 16, 2020</p>
  
  
  
  <div id="tags">
    <ul>
      
        
        
          <li><a href="https://binzhang-u5f6c.github.io/tags/others/">others</a></li>
        
      
    </ul>
  </div>
  
  
  <div id="contentBody">
    <h2 id="1-git-basics">1. Git Basics</h2>
<p>Initializing a repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git init
</code></pre></div><p>Clone a repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone &lt;url&gt; &lt;path&gt;
</code></pre></div><p>Track new files or stage modified file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add &lt;file&gt;
</code></pre></div><p>Remove and move files.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git rm &lt;file&gt;
git mv &lt;file&gt;
</code></pre></div><p>Commit all staged files.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git commit
git commit --amend <span style="color:#75715e"># commit to your last commit</span>
</code></pre></div><p>Check the status.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git status
</code></pre></div><p>Show commit history.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git log
git log --patch <span style="color:#75715e"># show the difference</span>
</code></pre></div><p>Work with remotes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git remote <span style="color:#75715e"># show remotes</span>
git remote add &lt;remote-name&gt; &lt;url&gt; <span style="color:#75715e"># add remote</span>
git remote rm &lt;remote-name&gt; <span style="color:#75715e"># remove remote</span>
git remote rename &lt;remote-name1&gt; &lt;remote-name2&gt; <span style="color:#75715e"># rename remote</span>
git fetch &lt;remote-name&gt; <span style="color:#75715e"># fetch the remote</span>
git pull &lt;remote-name&gt; &lt;branch&gt; <span style="color:#75715e"># pull = fetch and merge</span>
git push &lt;remote-name&gt; &lt;branch&gt; <span style="color:#75715e"># push</span>
</code></pre></div><p>Work with tags.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git tag <span style="color:#75715e"># show tags</span>
git tag -a &lt;tag&gt; &lt;commit checksum&gt; <span style="color:#75715e"># create tag</span>
git tag -d &lt;tag&gt; <span style="color:#75715e"># delete tag</span>
git push &lt;remote-name&gt; &lt;tag&gt; <span style="color:#75715e"># push tag to remote</span>
git push &lt;remote-name&gt; --tags <span style="color:#75715e"># push all tags to remote</span>
</code></pre></div><h2 id="2-branch">2. Branch</h2>
<p>Git store all data as <strong>snapshots</strong>.
The snapshot is organized in the form of tree structure.
Each file is stored as a <strong>blob</strong> object as the leaf of the snapshot tree.
If the file is not modified, git will only store a pointer to its previous
blob object.</p>
<p>When making a commit, a commit object is created, including author&rsquo;s name,
email, commit message, a pointer to the root node of the snapshot tree,
and a pointer to its parent commit.</p>
<p>Both tags and branches are pointers to a commit object.
Another important pointer is <strong>HEAD</strong>, which decide what files are shown in
the current directory.</p>
<p>Create a new branch.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git branch &lt;branch&gt;
</code></pre></div><p>Move the HEAD to point to a branch.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout &lt;branch&gt;
git checkout -b &lt;branch&gt; <span style="color:#75715e"># create a branch and switch to it</span>
</code></pre></div><p>Merge a branch and delete it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git merge &lt;branch&gt;
git branch -d &lt;branch&gt;
</code></pre></div><p>If the merged branch is fast-forward current branch, the command will only
move current branch pointer forward.
If not, the merging is based on the most recent common ancestor.
A new snapshot is created and current branch pointer will be moved
to the new snapshot.</p>
<p>If a merge conflict occur, git will stop merging and add conflict marker in
the files that have conflicts.
You have to modify manually and commit to finalize.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git commit
</code></pre></div><p>When you clone a repository from Internet,
there are two different pointers for each branch,
one normal branch, and one remote-tracking branch.
The remote-tracking branch show the branch information of the remote
repository.
When you commit, only the local branch pointer will move.
Fetch will synchronize the remote-tracking branch pointer to the remote
repository.</p>
<p>After cloning a repository, git automatically create a local master branch
tracking the remote-tracking master branch.
If you want to track other branch,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git checkout --track &lt;remote-name&gt;/&lt;branch&gt;
<span style="color:#75715e"># if you want to have a different name</span>
git checkout -b &lt;another-name&gt; &lt;remote-name&gt;/&lt;branch&gt;
</code></pre></div><p>To set a local branch to a remote-tracking branch,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git branch -u &lt;remote-name&gt;/&lt;branch&gt;
</code></pre></div><p>Delete a remote branch.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git push &lt;remote-name&gt; --delete &lt;branch&gt;
</code></pre></div><h2 id="3-rebase">3. Rebase</h2>
<p>Rebase command change the ancestor of a branch.
It finds the common ancestor of two branches, gets all changes since the common
ancestor, replays the changes to the base branch.
The former branch will be deleted.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git rebase &lt;base-branch&gt; &lt;topic-branch&gt;
</code></pre></div><p>Often, rebase is used when you want to contribute a project.
Rebase your local branch to <code>origin/master</code>, and submit the pull request.
It will be convenient for the maintainer to merge your changes.</p>
<p><strong>Note</strong>:</p>
<ul>
<li>Do not rebase commits that exist outside your repository</li>
<li>Do not rebase commits that others may have based work on</li>
</ul>
<p>Compared with merge, rebase will delete some history of your project,
but make your project history clear.</p>
<h2 id="4-reset-and-checkout">4. Reset and Checkout</h2>
<p>Git maintains three trees.</p>
<ul>
<li><strong>HEAD</strong>: last commit snapshot, which the HEAD pointer pointing to</li>
<li><strong>Index</strong>: files staged and to be commit</li>
<li><strong>Working Directory</strong></li>
</ul>
<p>Reset command do three things:</p>
<ul>
<li>move what HEAD points to (stop here if <code>--soft</code>)</li>
<li>update the Index with the contents of what HEAD points to
(stop here if <code>--mixed</code> or no options)</li>
<li>update the Working Directory (stop here if <code>--hard</code>)</li>
</ul>
<p>Thus <code>git reset HEAD &lt;file&gt;</code> is used to unstage a staged file.</p>
<p>The main differences between reset and checkout are:</p>
<ul>
<li>Checkout is working-directory safe.</li>
<li>Checkout only move the HEAD pointer, while reset move what HEAD points to.</li>
</ul>
<p>Both reset and checkout can be followed by <code>&lt;paths&gt;</code>.
Only the paths, rather than the whole directory, will be act upon.</p>
<h2 id="5-debug">5. Debug</h2>
<p>Find which commit was the first one to introduce a bug or problem.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git bisect start
git bisect bad
git bisect good &lt;good_commit&gt;
</code></pre></div><p>Annotate the lines with which commit was the last one to introduce a change
and who authored that commit.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git blame -L &lt;line1&gt;,&lt;line2&gt; &lt;file&gt;
</code></pre></div><p>Find any string in files, no matter current or older versions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git grep &lt;str&gt;
</code></pre></div>
  </div>
  <footer>
  <p>
  &copy;  Bin Zhang.
  Powered by <a href="https://gohugo.io/">Hugo</a>
  using the <a href="https://github.com/koirand/pulp/">pulp</a> theme.
  </p>
</footer><script src="https://binzhang-u5f6c.github.io/js/custom.js"></script>



  </body>
</html>
